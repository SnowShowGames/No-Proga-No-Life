#include <iostream>
#include <clocale>
#include <cmath>

using namespace std;

struct List2
{
	int info; //запись списка
List2 *next; //указатель на след. элем.
List2 *pred; //указатель на пред. элем.
};

void Print1(List2 *begin) //распечаика списка при движении вперёд, на след элемент
{
List2 *tmp=begin;
while(tmp==NULL)
{
cout<<"\n Elem: "<<tmp->info<<" ";
tmp=tmp->next; // двигаем указатель вперёд
}
}

//ф-я создания списка
List2 *make_List()
{
List2 *begin=new(List2);//создаём в памяти список
List2 *r, *p; int x; cin>>x;
begin->info=x; //добавим x в список
p=begin;
while (x!=0)// вводим эл.списка, пока не 0
{
cin>>x;
if (x!=0)
{
r=new(List2); // добавим след элемент списка
r->info=x;
r->next=NULL; // следущего эл. - нет
p->next = r;
r->pred=p;
p=r;
}
}
return begin;
}

//это надо самим сделать
//распечатка списка при движении назад, на пред элем
void Print2(List2* end)
{
	List2* tmp = end;
	while (tmp->next != NULL)
	{
		tmp = tmp->next;
	}
	while (tmp != end->pred)
	{
		cout << "\n Elem: " << tmp->info << " ";
		tmp = tmp->pred;
	}
}
//ф-я подсчёта кол-ва элементов ... дописать
//int List2Kol(List2* beg)
//{
//	List2* tmp = beg;
//
//	return;
//}

//удаление эл. со значением "k"
List2* delElem(List2*& beg, int k)
{
	List2* p = beg->next;
	List2* r;
	while (p != NULL)
	{
		if (p->info == k) //что-то, +---+
		{
			if (p->next != NULL)
			{
				r = p;
				p->next->pred = p->pred;
				p->pred->next = p->next;
			}
			delete[]r;
		}
		else
		{
			p->pred->next = NULL;
			delete[]p;
			break;
		}
		p = p->next;
	}
	if (beg->info == k) // для случая когда "k" в начале списка
	{
		p = beg;
		beg = beg->next;
		beg->pred = NULL;
		delete[]p;
	}
	return beg;
}

int main()
{
	int x;
	setlocale(LC_ALL, "Rus");
	List2* head = make_List();
	//ввести и распечатать, [дописать если нужно]
	if (head != NULL)
	{
		Print1(head);
		Print2(head);
		delElem(x);
	}
	return 0;
}
